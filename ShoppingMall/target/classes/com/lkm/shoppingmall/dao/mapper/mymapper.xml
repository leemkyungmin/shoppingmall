<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="com.lkm.shoppingmall.dao.myDAO">
	 
	 <select id="getCustomer_svc" parameterType="Map" resultType="com.lkm.shoppingmall.dto.CustomerServiceDto">
	 	SELECT ROWNUM ,a.*
	 	FROM 
		 	(SELECT *
		 	FROM CUSTOMER_SERVICE
		 	WHERE UIDX =${uIdx} AND DIDX =${dIdx} ) a
		WHERE ROWNUM between ${beginRecord} AND ${endRecord}
	 </select>
	 <select id="getPageCount" parameterType="Map" resultType="int" >
	 	SELECT COUNT(*)
	 	FROM CUSTOMER_SERVICE
	 	WHERE UIDX =${uIdx} AND DIDX =${dIdx}
	 </select>
	 <select id="userInfo" parameterType="String" resultType="com.lkm.shoppingmall.dto.userDto">
	 	SELECT *
	 	FROM USERS
	 	WHERE UIDX =#{idx}
	 </select>
	 <select id="deptInfo" parameterType="String" resultType ="com.lkm.shoppingmall.dto.departmentDto">
	 	SELECT *
	 	FROM DEPT
	 	WHERE DIDX =#{idx}
	 </select>
	 
	 <update id="UpdateUserPw" parameterType="String" >
	 	UPDATE USERS 
	 	SET UPW ='${param2}'
	 	WHERE UPW ='${param1}'
	 </update>
	 <update id="UpdateDeptPw" parameterType="String" >
	 	UPDATE DEPT 
	 	SET DPW ='${param2}'
	 	WHERE DPW ='${param1}'
	 </update>
	 <update id="updateUser" parameterType="Map">
	 	UPDATE USERS
	 	SET UEMAIL='${uEmail}',
	 		UPHONE='${uPhone}'
	 	WHERE UIDX=${uIdx}
	 </update>
	 
	 <update id="deleteUser" parameterType="Map">
	 	UPDATE USERS 
	 	SET SHOW ='n'
	 	WHERE UIDX =${idx} and UPW ='${pw}'
	 </update>
	 <update id="deleteDept" parameterType="Map">
	 	UPDATE DEPT
	 	SET SHOW='n'
	 	WHERE DIDX =${idx} and DPW ='${pw}'
	 </update>
</mapper>